{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
            "type": "string",
            "defaultValue": "[resourceGroup().location]",
            "metadata": {
                "description": "Optional. Location for all resources."
            }
        }
    },
  "resources": [{
  "properties": {
    "lenses": {
      "0": {
        "order": 0,
        "parts": {
          "0": {
            "position": {
              "x": 0,
              "y": 0,
              "colSpan": 4,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [],
              "type": "Extension/HubsExtension/PartType/MarkdownPart",
              "settings": {
                "content": {
                  "settings": {
                    "content": "<img width='300' src='https://www.global.ntt/img/logo.png'/> ",
                    "title": "Client Logo",
                    "subtitle": "My Company Logo",
                    "markdownSource": 1,
                    "markdownUri": null
                  }
                }
              }
            }
          },
          "1": {
            "position": {
              "x": 4,
              "y": 0,
              "colSpan": 3,
              "rowSpan": 2
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Total GB of deployed Disks",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "where type == \"microsoft.compute/disks\"\n| extend SizeGB = tolong(properties.diskSizeGB)\n| summarize ['Total Disk Size (GB)']=sum(SizeGB)",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "592ba23e-d863-46e7-aa59-51b001018bab",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQuerySingleValueTile",
              "settings": {}
            }
          },
          "2": {
            "position": {
              "x": 7,
              "y": 0,
              "colSpan": 3,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Number of Virtual Networks in Subscription",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "where type == \"microsoft.network/virtualnetworks\"or type == \"microsoft.classicnetwork/virtualnetworks\"\n| summarize ['Virtual networks']=count()",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "bcb924ec-8d7a-4cb5-ba86-fb180abcb611",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQuerySingleValueTile",
              "settings": {}
            }
          },
          "3": {
            "position": {
              "x": 10,
              "y": 0,
              "colSpan": 6,
              "rowSpan": 8
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Recovery Service Vaults by SKU",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "resources\n| where type == 'microsoft.recoveryservices/vaults'\n| summarize count() by  tostring(sku.name)",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "value": 1,
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "d9f8c6df-37ca-49e2-a63f-d378d74596a7",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryChartTile",
              "settings": {}
            }
          },
          "4": {
            "position": {
              "x": 4,
              "y": 2,
              "colSpan": 3,
              "rowSpan": 2
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Total Compute Resources in Sub",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "where type == \"microsoft.compute/virtualmachines\" or type==\"microsoft.classiccompute/virtualmachines\"\n| summarize VMCount=count()\n| extend ['Count (Virtual Machines)']=VMCount\n| project ['Count (Virtual Machines)']",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "a85ed0f4-2763-40bb-8430-3dc5e1d6bbb1",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQuerySingleValueTile",
              "settings": {}
            }
          },
          "5": {
            "position": {
              "x": 0,
              "y": 4,
              "colSpan": 5,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Virtual machines by location",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "Resources\n| where type =~ 'Microsoft.Compute/virtualMachines'\n| summarize count() by location",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "value": 2,
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "26111d1b-c6b5-4b42-92c2-fcb96977fdc9",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryChartTile",
              "settings": {}
            }
          },
          "6": {
            "position": {
              "x": 5,
              "y": 4,
              "colSpan": 5,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Count of VM by power state",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "Resources\r\n| where type == 'microsoft.compute/virtualmachines'\r\n| summarize count() by tostring(properties.extended.instanceView.powerState.code)",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "value": 2,
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "ab6182ec-2365-4659-9654-c5e21554aad0",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryChartTile",
              "settings": {}
            }
          },
          "7": {
            "position": {
              "x": 0,
              "y": 8,
              "colSpan": 5,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Total Virtual Machines by OS",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "Resources\r\n| where type =~ 'Microsoft.Compute/virtualMachines'\r\n| summarize count() by tostring(properties.storageProfile.osDisk.osType)\r\n",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "value": 2,
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "6e5452e7-9df9-42fe-8135-6eb718438f74",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryChartTile",
              "settings": {}
            }
          },
          "8": {
            "position": {
              "x": 5,
              "y": 8,
              "colSpan": 11,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "List of VM in sub with Tags",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "resources\r\n| where type == \"microsoft.compute/virtualmachines\"\r\n|project name,tenantId,resourceGroup,tags",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "6ce726fb-7e49-463d-8370-dee8304cb136",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryGridTile",
              "settings": {}
            }
          },
          "9": {
            "position": {
              "x": 0,
              "y": 12,
              "colSpan": 16,
              "rowSpan": 7
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "All Completed Backup jobs sorted by End Time",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "recoveryservicesresources\r\n| where type == \"microsoft.recoveryservices/vaults/backupjobs\"\r\n| where properties['status'] == \"Completed\"\r\n| order by tostring(properties['endTime'])",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "852e97d9-343b-4ead-90e1-9e117a717552",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryGridTile",
              "settings": {}
            }
          },
          "10": {
            "position": {
              "x": 0,
              "y": 19,
              "colSpan": 16,
              "rowSpan": 6
            },
            "metadata": {
              "inputs": [
                {
                  "name": "partTitle",
                  "value": "Recovery Service Vaults in Sub",
                  "isOptional": true
                },
                {
                  "name": "query",
                  "value": "resources\n| where type == 'microsoft.recoveryservices/vaults'\n|order by tostring(sku.name)\n|project id,name,type,tenantId,location,resourceGroup,sku.name,properties.provisioningState",
                  "isOptional": true
                },
                {
                  "name": "chartType",
                  "isOptional": true
                },
                {
                  "name": "isShared",
                  "isOptional": true
                },
                {
                  "name": "queryId",
                  "value": "d155164d-8db7-4a0a-853b-361c2c36e53c",
                  "isOptional": true
                },
                {
                  "name": "formatResults",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/ArgQueryGridTile",
              "settings": {}
            }
          }
        }
      }
    },
    "metadata": {
      "model": {
        "timeRange": {
          "value": {
            "relative": {
              "duration": 24,
              "timeUnit": 1
            }
          },
          "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
        }
      }
    }
  },
  "name": "NTT-InfraView",
  "type": "Microsoft.Portal/dashboards",
  "location": "[resourceGroup().location]",
  "tags": {
    "hidden-title": "NTT-InfraView-TEST"
  },
  "apiVersion": "2015-08-01-preview"
}]
}
